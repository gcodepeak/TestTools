<!DOCTYPE html>
<html lang="zh_CN">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta property="wb:webmaster" content="6fde5ee71fe33f5e" />
<script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js?appkey=3208590814" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="http://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js" 
		data-appid="101029271" data-redirecturi="http://www.meilizhubo.com" charset="utf-8"></script>
</head>
<body>
<span id="qq_login_btn"></span>

<span id="wb_connect_btn"></span>

<script type="text/javascript">

	QC.Login({//按默认样式插入QQ登录按钮
		btnId:"qq_login_btn"	//插入按钮的节点id
	}, function(reqData, opts){//登录成功
		if(QC.Login.check()){//如果已登录
			QC.Login.getMe(function(openId, accessToken){
				alert(["当前登录用户的", "openId为："+openId, "accessToken为："+accessToken].join("\n"));
			});
			//这里可以调用自己的保存接口
			//...
			alert('call back');
		}
	}, function(opts){//注销成功
        alert('QQ登录 注销成功');
	});
	
	WB2.anyWhere(function(W){
		W.widget.connectButton({
			id: "wb_connect_btn",	
			type:'1,2',
			callback : {
				login:function(o){	//登录后的回调函数
					alert("login: "+o.screen_name);
				},
				logout:function(){	//退出后的回调函数
					alert('logout');
				}
			}
		});
	});
</script>
 
<script>
 function toLogin()
 {
   //以下为按钮点击事件的逻辑。注意这里要重新打开窗口
   //否则后面跳转到QQ登录，授权页面时会直接缩小当前浏览器的窗口，而不是打开新窗口
   var A=window.open("oauth/index.php","TencentLogin", 
   "width=450,height=320,menubar=0,scrollbars=1,
   resizable=1,status=1,titlebar=0,toolbar=0,location=1");
 }
 </script>
 
 <a href="#" onclick="toLogin()">
 登录</a>
</body>
</html>